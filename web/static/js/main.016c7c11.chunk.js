(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(56)},25:function(e,t,n){},27:function(e,t,n){},32:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(17),r=n.n(o),i=(n(25),n(3)),c=n(4),u=n(6),s=n(5),m=n(7),b=(n(27),n(1)),h=n(18),p=n.n(h),f=n(9),d=(n(32),n(34)),g=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(u.a)(this,Object(s.a)(t).call(this,e));var a=e.cookies;return n.state={fileName:null,fileSize:null,fileNameStoreAsGithub:null,repo:a.get("repo")||"",token:a.get("token")||"",hasToken:!!a.get("token"),apiRes:{},showFailMsg:!1},n.handleSubmit=n.handleSubmit.bind(Object(b.a)(Object(b.a)(n))),n.fileInput=l.a.createRef(),n.handleImageChange=n.handleImageChange.bind(Object(b.a)(Object(b.a)(n))),n.commitToGithub=n.commitToGithub.bind(Object(b.a)(Object(b.a)(n))),n.tokenInputOnchange=n.tokenInputOnchange.bind(Object(b.a)(Object(b.a)(n))),n.deleteToken=n.deleteToken.bind(Object(b.a)(Object(b.a)(n))),n.comfirmToken=n.comfirmToken.bind(Object(b.a)(Object(b.a)(n))),n.repoInputOnchange=n.repoInputOnchange.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"comfirmToken",value:function(e){e.preventDefault();var t=this.state.token;if(""!==t){var n=this.props.cookies,a=new Date;a=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}(a,1e4),n.set("token",t,{path:"/",expires:a}),this.setState({hasToken:!0})}}},{key:"deleteToken",value:function(e){e.preventDefault();var t=this.props.cookies;this.setState({token:""}),t.remove("token"),this.setState({hasToken:!1})}},{key:"repoInputOnchange",value:function(e){console.log(e.target.value),this.setState({repo:e.target.value});var t=new Date;t=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}(t,1e4),this.props.cookies.set("repo",e.target.value,{path:"/",expires:t})}},{key:"tokenInputOnchange",value:function(e){console.log(e.target.value),this.setState({token:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FileReader,a=this.fileInput.current.files[0],l=String(this.fileInput.current.files[0].name),o=(new Date).getTime(),r=l.substring(l.lastIndexOf(".")),i=p()(String(o)+String(l))+r;n.onloadend=function(){console.log(n.result);var e=n.result;e=e.substring(e.indexOf(",")+1),console.log(e),t.commitToGithub(e,i).then(function(){t.setState({fileNameStoreAsGithub:i})})},n.readAsDataURL(a)}},{key:"commitToGithub",value:function(e,t){var n=String(e),a=this.state,l=a.token,o=a.repo,r=this;return console.log(n),d({method:"PUT",url:"https://api.github.com/repos/p208p2002/"+o+"/contents/drive/"+t,headers:{Authorization:"token "+l},data:{message:"upload by Git Drive",committer:{name:"Git Drive",email:"gitdrive@gitdrive.com"},content:n}}).then(function(e){console.log(e.data.content),r.setState({apiRes:e.data.content})}).catch(function(e){console.log(e),r.setState({showFailMsg:!0})})}},{key:"handleImageChange",value:function(e){e.preventDefault(),console.log(this.fileInput.current.files[0]);var t=this.fileInput.current.files[0],n=t.name,a=void 0===n?null:n,l=t.size,o=void 0===l?null:l;this.setState({fileName:a,fileSize:o})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fileSize,a=t.fileName,o=t.fileNameStoreAsGithub,r=t.token,i=t.hasToken,c=t.apiRes,u=t.showFailMsg,s=t.repo,m=c.download_url,b=void 0===m?"":m,h=c.html_url,p=void 0===h?"":h,f=c.git_url,d=void 0===f?"":f;return console.log(b),l.a.createElement("div",{id:"Upload"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Token:",i?l.a.createElement("span",null,l.a.createElement("b",null,r.substring(0,5)+"***...")):l.a.createElement("input",{type:"text",onChange:function(t){return e.tokenInputOnchange(t)},value:r})),i?l.a.createElement("button",{type:"button",className:"btn-danger btn-sm token-btn",onClick:function(t){return e.deleteToken(t)}},"delete token"):l.a.createElement("button",{type:"button",className:"btn-success btn-sm",onClick:function(t){return e.comfirmToken(t)}},"confirm token"),l.a.createElement("br",null),l.a.createElement("label",null,"Target Repo:",l.a.createElement("input",{type:"text",value:s,onChange:this.repoInputOnchange})),l.a.createElement("br",null),l.a.createElement("label",null,"Upload file:",l.a.createElement("input",{type:"file",ref:this.fileInput,onChange:function(t){return e.handleImageChange(t)}})),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",disabled:null===a||!0!==i||""===s},"Submit"),l.a.createElement("br",null),u?l.a.createElement("small",{className:"text-danger"},"upload fail,check token of file"):null),"File name:",a,l.a.createElement("br",null),"File size:",n/1024,"KB",l.a.createElement("br",null),o,l.a.createElement("hr",null),l.a.createElement("label",null,"Download URL(direct link):",l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:b})),l.a.createElement("br",null),l.a.createElement("label",null,"GIT URL:",l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:d})),l.a.createElement("br",null),l.a.createElement("label",null,"HTML URL:",l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:p})))}}]),t}(a.Component),v=Object(f.b)(g),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("a",{href:"https://github.com/p208p2002/git-drive/blob/master/README.md",rel:"noopener noreferrer",target:"_blank"},"Get some problem?"),l.a.createElement(v,null))}}]),t}(a.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(k,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(54);r.a.render(l.a.createElement(f.a,null,l.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.016c7c11.chunk.js.map